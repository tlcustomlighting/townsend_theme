/*
 *	jQuery ZoomScript 1.0
 *
 *  Domain: 
 *  
 *  Date: 1.4.2013
 *	Copyright (c) 2013 ZoomScript
 *	www.zoomscript.com
 */
function Slider_Abstract(){this.initialized=false;}(function($){$.extend(Slider_Abstract.prototype,{setSettings:function(settings){this.settings=$.extend({},$.fn.slidable.defaults,settings||{});},init:function($slider,settings){this.setSettings(settings);if(!this.initialized){this.pane=null;this.prevPageNav=null;this.nextPageNav=null;this.items=null;this.itemDimension=0;this.animation=false;this.mouseWheelContainer=null;this.wipeTouch=null;this.slider=$slider;this.createHtml();this.initialized=true;}this.cssAnimationSupport=this.supportsCssAnimation();this.bindEvents();this.initPanePosition();this.refreshItems(true);},initPanePosition:function(){this.setPanePosition(0);},refreshItems:function(centerItem){this.items=this.pane.children();if(this.items.length>1){this.itemDimension=this.getItemDimension();this.initPaneDimensions();this.initSliderDimensions();if(centerItem){this.centerSelectedItem(false);}this.adjustNavigation();}},addItem:function(item,position,centerItem){if(this.cssAnimationSupport){item.css("-webkit-backface-visibility","hidden");item.css("-webkit-perspective","1000");}if(position=="before"){this.pane.prepend(item);}else{this.pane.append(item);}this.refreshItems(centerItem);},deleteItem:function(index,centerItem){var item=$(this.items[index]);if(item){item.remove();delete this.items[index];this.refreshItems(centerItem);}},bindEvents:function(){if(this.mouseWheelContainer){this.mouseWheelContainer.unmousewheel();}if(this.settings.mouseWheelContainer){this.mouseWheelContainer=this.settings.mouseWheelContainer;this.mouseWheelContainer.mousewheel($.proxy(this.mouseWheel,this));}if(this.settings.enableKeys){this.keyDownHandler=$.proxy(function(event){this.keyDown(event);},this);$(document).keydown(this.keyDownHandler);}if(this.settings.wipeTouchContainer){var wipeTouchContainer=this.settings.wipeTouchContainer;wipeTouchContainer.wipetouch({tapToClick:true,moveX:this.settings.wipeTouchMinMove,moveY:this.settings.wipeTouchMinMove,allowVertical:this.allowVerticalWipeTouch,allowHorizontal:this.allowHorizontalWipeTouch,wipeMove:$.proxy(function(result){this.wipeMove(result);},this),wipeLeft:$.proxy(function(result){this.wipeNextPage(result);},this),wipeRight:$.proxy(function(result){this.wipePrevPage(result);},this),wipeUp:$.proxy(function(result){this.wipePrevPage(result);},this),wipeDown:$.proxy(function(result){this.wipeNextPage(result);},this)});this.wipeTouch=wipeTouchContainer.wipetouch("get");}},unBindEvents:function(){if(this.keyDownHandler){$(document).unbind("keydown",this.keyDownHandler);}},mouseWheel:function(event,delta){event.preventDefault();if(this.animation){return;}if(delta<0){this.nextPage();}if(delta>0){this.prevPage();}},keyDown:function(event){var code=event.charCode||event.keyCode;switch(code){case 37:if(this.allowHorizontalKeys){event.preventDefault();this.prevPage();}break;case 39:if(this.allowHorizontalKeys){event.preventDefault();this.nextPage();}break;case 38:if(this.allowVerticalKeys){event.preventDefault();this.prevPage();}break;case 40:if(this.allowVerticalKeys){event.preventDefault();this.nextPage();}break;}},wipePrevPage:function(result){if(this.animation){return;}var itemsToMove=this.settings.wipeTouchItemsToMove?this.settings.wipeTouchItemsToMove-1:result.speed;var panePosition=this.getPanePosition();var paneOffset=this.getPaneOffset1();var move=itemsToMove*this.itemDimension;var settings={effect:this.settings.wipeTouchEasingEffect,speed:this.settings.wipeTouchEasingSpeed};if(panePosition>0){move=-panePosition;}else{var paneItemOffset=Math.ceil(panePosition/this.itemDimension)*this.itemDimension-panePosition;move+=paneItemOffset>=(this.itemDimension*this.settings.wipeTouchItemTreshold)?paneItemOffset:(paneItemOffset-this.itemDimension);move=Math.min(move,paneOffset);if(this.settings.wipeRightCallback){settings.callback=this.settings.wipeRightCallback;}}if(move!=0){this.animate(panePosition+move,settings);}},wipeNextPage:function(result){if(this.animation){return;}var itemsToMove=this.settings.wipeTouchItemsToMove?this.settings.wipeTouchItemsToMove-1:result.speed;var panePosition=this.getPanePosition();var paneOffset=this.getPaneOffset2();var move=itemsToMove*this.itemDimension;var maxMove=this.getSliderDimension()-this.getPaneDimension();var settings={effect:this.settings.wipeTouchEasingEffect,speed:this.settings.wipeTouchEasingSpeed};if(panePosition<maxMove){move=panePosition-maxMove;}else{var paneItemOffset=Math.ceil(panePosition/this.itemDimension)*this.itemDimension-panePosition;move+=paneItemOffset<=(this.itemDimension*this.settings.wipeTouchItemTreshold)?-paneItemOffset:(this.itemDimension-paneItemOffset);move=Math.min(move,paneOffset);if(this.settings.wipeLeftCallback){settings.callback=this.settings.wipeLeftCallback;}}if(move!=0){this.animate(panePosition-move,settings);}},wipeMove:function(result){if(this.settings.disableWipeTouchAnimation){return;}if(!this.settings.wipeTouchEnableMoveWhileAnimation&&this.animation){return;}if(this.animation){this.stopAnimation();}var move=result.deltaX;var position=this.getPanePosition();var maxMove=this.getSliderDimension()-this.getPaneDimension();if(position+move<maxMove-this.settings.wipeTouchElasticLength){move=maxMove-position-this.settings.wipeTouchElasticLength;}this.setPanePosition(position+move);},adjustNavigation:function(){if(this.settings.createNavigation){this.prevPageNav.addClass("hidden");this.nextPageNav.addClass("hidden");if(this.getSliderDimension()<this.getPaneDimension()){var paneOffset1=this.getPaneOffset1();var paneOffset2=this.getPaneOffset2();this.prevPageNav.removeClass("hidden");this.nextPageNav.removeClass("hidden");this.prevPageNav.removeClass("disabled");this.nextPageNav.removeClass("disabled");if(paneOffset1==0){this.prevPageNav.addClass("disabled");}if(paneOffset2==0){this.nextPageNav.addClass("disabled");}}}},centerSelectedItem:function(animate){var selectedElement=this.pane.find(".selected");if(selectedElement.length>0){var elementMargin=this.getElementMargin(selectedElement);var elementPosition=this.getElementPosition(selectedElement);var prevItemCount=(elementPosition+elementMargin)/this.itemDimension;var sliderDimension=Math.floor((this.getSliderDimension()+elementMargin)/this.itemDimension)*(this.itemDimension-1);var prevItemInViewCount=Math.floor((sliderDimension/2)/this.itemDimension);var itemsToMove=Math.max(prevItemCount-prevItemInViewCount,0);var position=Math.min(itemsToMove*this.itemDimension,this.getPaneDimension()-this.getSliderDimension());if(animate){if(parseInt(-position)!=parseInt(this.getPanePosition())){this.animate(-position);}}else{this.setPanePosition(-position);}}return null;},selectItem:function(index,centerItem,animate){if(index>=0&&index<this.items.length){this.items.removeClass("selected");$(this.items[index]).addClass("selected");if(centerItem){this.centerSelectedItem(animate);}this.adjustNavigation();}},getPaneOffset1:function(){return Math.abs(this.getPanePosition());},getPaneOffset2:function(){return this.getPaneDimension()+this.getPanePosition()-this.getSliderDimension();},createHtml:function(){var items=this.slider.children();this.slider.css("position","relative");this.slider.css("overflow","hidden");this.slider.addClass(this.sliderTypeClass);this.pane=$('<div class="pane"/>');this.slider.append(this.pane);this.pane.css("display","block");this.pane.css("position","absolute");this.pane.css("left",0);this.pane.css("top",0);this.initPanePosition();items.each($.proxy(function(index,element){this.pane.append($(element));},this));if(this.settings.createNavigation){this.prevPageNav=$('<div class="sliderNavBt prevPage"/>');this.nextPageNav=$('<div class="sliderNavBt nextPage"/>');this.prevPageNav.insertBefore(this.slider);this.nextPageNav.insertAfter(this.slider);this.prevPageNav.addClass(this.sliderTypeClass);this.nextPageNav.addClass(this.sliderTypeClass);this.prevPageNav.click($.proxy(this.prevPage,this));this.nextPageNav.click($.proxy(this.nextPage,this));}},prevPage:function(){if(this.animation){return;}var panePosition=this.getPanePosition();var paneOffset=this.getPaneOffset1();var move=this.settings.itemsToMove*this.itemDimension;move=Math.min(move,paneOffset);this.animate(panePosition+move);},nextPage:function(){if(this.animation){return;}var panePosition=this.getPanePosition();var paneOffset=this.getPaneOffset2();var move=this.settings.itemsToMove*this.itemDimension;move=Math.min(move,paneOffset);this.animate(panePosition-move);},animationEnd:function(callback){if(callback){callback();}this.stopAnimation();this.adjustNavigation();},stopAnimation:function(){if(this.wipeTouch){this.wipeTouch.start();}this.animation=false;this.pane.stop();if(this.cssAnimationSupport){this.pane.unbind("webkitTransitionEnd");this.pane.unbind("transitionend");this.pane.unbind("oTransitionEnd");this.pane.unbind("MSTransitionEnd");}},startAnimation:function(){if(this.wipeTouch){this.wipeTouch.stop();}this.animation=true;},supportsCssAnimation:function(){if(!this.settings.cssAnimation){return false;}var b=document.body||document.documentElement;var s=b.style;var p="transition";if(typeof s[p]=="string"){return true;}v=["Moz","Webkit","Khtml","O","ms"],p=p.charAt(0).toUpperCase()+p.substr(1);for(var i=0;i<v.length;i++){if(typeof s[v[i]+p]=="string"){return true;}}return false;},css:function(element,property,value){if(value){element.css("-ms-"+property,value);element.css("-moz-"+property,value);element.css("-webkit-"+property,value);element.css("-o-"+property,value);}else{var value1=element.css("-ms-"+property);var value2=element.css("-moz-"+property);var value3=element.css("-webkit-"+property);var value4=element.css("-o-"+property);return value1||value2||value3||value4;}},getCssAnimationEffect:function(uiEffect){switch(uiEffect){case"linear":return"linear";case"swing":case"easeOutSine":case"easeOutExpo":case"easeOutCirc":case"easeOutCubic":case"easeOutQuad":case"easeOutQuart":case"easeOutQuint":return"ease-out";case"easeInSine":case"easeInExpo":case"easeInCirc":case"easeInCubic":case"easeInQuad":case"easeInQuart":case"easeInQuint":return"ease-in";case"easeInOutSine":case"easeInOutExpo":case"easeInOutCirc":case"easeInOutCubic":case"easeInOutQuad":case"easeInOutQuart":case"easeInOutQuint":return"ease-in-out";default:return"default";}}});})(jQuery);function Slider_Horizontal(){this.sliderTypeClass="horizontal";this.allowVerticalWipeTouch=false;this.allowHorizontalWipeTouch=true;this.allowVerticalKeys=false;this.allowHorizontalKeys=true;}(function($){$.extend(Slider_Horizontal.prototype,Slider_Abstract.prototype,{initPaneDimensions:function(){var width=0;if(this.items.length>0){width+=$(this.items[0]).outerWidth(true);}if(this.items.length>1){width+=$(this.items[this.items.length-1]).outerWidth(true);}if(this.items.length>2){width+=this.itemDimension*(this.items.length-2);}this.pane.width(width);},initSliderDimensions:function(){this.slider.attr("style",this.slider.attr("style").toLowerCase().replace(/width[^;]+;?/,""));if(this.slider.width()>this.pane.width()){this.slider.width(this.pane.width());}},getItemDimension:function(){return $(this.items[1]).outerWidth(true);},getItemPosition:function(item){return item.position().left;},getPanePosition:function(){if(this.cssAnimationSupport){var matrix=this.css(this.pane,"transform");if(matrix&&matrix!="none"){var match=matrix.match(/matrix\((.+?),\s*(.+?),\s*(.+?),\s*(.+?),\s*(.+?),\s*(.+?)\)/);if(match){return parseInt(match[5].replace("px",""));}}return 0;}return this.pane.position().left;},setPanePosition:function(left){if(this.cssAnimationSupport){this.css(this.pane,"transition","none");this.css(this.pane,"transform","translate3d("+left+"px, 0px, 0px)");}else{this.pane.css("left",left);}},getPaneDimension:function(){return this.pane.width();},getSliderDimension:function(){return this.slider.width();},getElementMargin:function(element){return parseInt(element.css("margin-left"));},getElementPosition:function(element){return element.position().left;},animate:function(move,settings){var defaultSettings={effect:this.settings.easingEffect,speed:this.settings.speed,callback:null};var mergedSettings=$.extend({},defaultSettings,settings||{});if(this.settings.disableWipeTouchAnimation){this.setPanePosition(move);this.animationEnd(mergedSettings.callback);return;}this.startAnimation();if(this.cssAnimationSupport){this.pane.css("-webkit-backface-visibility","hidden");this.pane.css("-webkit-perspective","1000");this.pane.bind("webkitTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("transitionend",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("MSTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("oTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.css(this.pane,"transition-property","all");this.css(this.pane,"transition-duration",(mergedSettings.speed/1000)+"s");this.css(this.pane,"transition-timing-function",this.getCssAnimationEffect(mergedSettings.effect));this.css(this.pane,"transform","translate3d("+move+"px, 0px, 0px)");}else{this.pane.animate({left:move},mergedSettings.speed,mergedSettings.effect,$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));}}});})(jQuery);(function($){var types={horizontal:1,vertical:2};var methods={init:function(type,settings){var ret;this.each(function(){var $this=$(this);var slider=$this.data("slider");if(!slider){if(type==types.vertical){slider=new Slider_Vertical();}else{slider=new Slider_Horizontal();}}var mergedSettings=$.extend({},$.fn.slidable.defaults,settings||{});slider.init($this,mergedSettings);$this.data("slider",slider);});return ret;},get:function(){var slider=this.data("slider");if(!slider){$.error("Method get must be call after init on jQuery.slider");}return slider;}};$.extend($.fn,{slidable:function(type,method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,2));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.slider");}}},verticalSlider:function(method){return this.slidable(types.vertical,method);},horizontalSlider:function(method){return this.slidable(types.horizontal,method);}});$.fn.slidable.defaults={speed:400,itemsToMove:3,createNavigation:true,mouseWheelContainer:null,enableKeys:false,easingEffect:"linear",cssAnimation:false,wipeTouchContainer:null,wipeTouchItemsToMove:null,wipeTouchEasingSpeed:1000,wipeTouchEasingEffect:"linear",wipeTouchMinMove:5,wipeTouchItemTreshold:0,wipeLeftCallback:null,wipeRightCallback:null,wipeTouchEnableMoveWhileAnimation:true};})(jQuery);function Slider_Vertical(){this.sliderTypeClass="vertical";this.allowVerticalWipeTouch=true;this.allowHorizontalWipeTouch=false;this.allowVerticalKeys=true;this.allowHorizontalKeys=false;}(function($){$.extend(Slider_Vertical.prototype,Slider_Abstract.prototype,{initPaneDimensions:function(){var height=0;if(this.items.length>0){height+=$(this.items[0]).outerHeight(true);}if(this.items.length>1){height+=$(this.items[this.items.length-1]).outerHeight(true);}if(this.items.length>2){height+=this.itemDimension*(this.items.length-2);}this.pane.height(height);},initSliderDimensions:function(){this.slider.attr("style",this.slider.attr("style").toLowerCase().replace(/height[^;]+;?/,""));if(this.slider.height()>this.pane.height()){this.slider.height(this.pane.height());}},getItemDimension:function(){return $(this.items[1]).outerHeight(true);},getItemPosition:function(item){return item.position().top;},getPanePosition:function(){if(this.cssAnimationSupport){var matrix=this.css(this.pane,"transform");if(matrix&&matrix!="none"){var match=matrix.match(/matrix\((.+?),\s*(.+?),\s*(.+?),\s*(.+?),\s*(.+?),\s*(.+?)\)/);if(match){return parseInt(match[6].replace("px",""));}}return 0;}return this.pane.position().top;},setPanePosition:function(top){if(this.cssAnimationSupport){this.css(this.pane,"transition","none");this.css(this.pane,"transform","translate3d(0px, "+top+"px, 0px)");}else{this.pane.css("top",top);}},getPaneDimension:function(){return this.pane.height();},getSliderDimension:function(){return this.slider.height();},getElementMargin:function(element){return parseInt(element.css("margin-top"));},getElementPosition:function(element){return element.position().top;},animate:function(move,settings){this.startAnimation();var defaultSettings={effect:this.settings.easingEffect,speed:this.settings.speed,callback:null};var mergedSettings=$.extend({},defaultSettings,settings||{});if(this.cssAnimationSupport){this.pane.bind("webkitTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("transitionend",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("MSTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.pane.bind("oTransitionEnd",$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));this.css(this.pane,"transition-property","all");this.css(this.pane,"transition-duration",(mergedSettings.speed/1000)+"s");this.css(this.pane,"transition-timing-function",this.getCssAnimationEffect(mergedSettings.effect));this.css(this.pane,"transform","translate3d(0px,"+move+"px, 0px)");}else{this.pane.animate({top:move},mergedSettings.speed,mergedSettings.effect,$.proxy(function(){this.animationEnd(mergedSettings.callback);},this));}}});})(jQuery);(function($){var methods={init:function(settings){var ret;this.each(function(){var $this=$(this);var thumbZoom=$this.data("thumbZoom");if(!thumbZoom){thumbZoom=new ThumbZoom(settings);thumbZoom.init($this);$this.data("thumbZoom",thumbZoom);}ret=ret?ret.add($this):$this;});return ret;},get:function(){var ret=[];this.each(function(){var $this=$(this);var thumbZoom=$this.data("thumbZoom");if(!thumbZoom){$.error("Method get must be call after init on jQuery.thumbZoom");}ret.push(thumbZoom);});return ret;}};$.extend($.fn,{thumbZoom:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.slider");}}}});$.fn.thumbZoom.defaults={zoomSize:100};})(jQuery);function ThumbZoom(settings){this.settings=$.extend({},$.fn.thumbZoom.defaults,settings||{});this.clone=null;}(function($){$.extend(ThumbZoom.prototype,{init:function($thumb){this.thumb=$thumb;this.thumb.mouseenter($.proxy(this.show,this));this.thumb.mouseleave($.proxy(this.thumbLeave,this));},thumbLeave:function(event){var target=$(event.relatedTarget);while(target.length>0&&target[0]!=$("body")[0]){if(target[0]==this.clone[0]){return;}target=target.parent();}this.hide();},show:function(){this.clone=this.thumb.clone(true);this.clone.mouseleave($.proxy(this.hide,this));this.clone.unbind("mouseenter");this.clone.unbind("click");this.clone.click($.proxy(this.cloneClick,this));$("body").append(this.clone);var cloneImage=this.clone.find("img")[0];$(cloneImage).removeAttr("width");$(cloneImage).removeAttr("height");var size=this.settings.zoomSize;cloneImage.width=size;cloneImage.height=size;this.clone.addClass("zoomed");this.clone.css("z-index",500);this.clone.css("position","absolute");this.clone.css("top",0);this.clone.css("left",0);var thumbPosition=this.thumb.offset();var left=thumbPosition.left-((this.clone.outerWidth()-this.thumb.outerWidth())/2)-parseInt($("body").css("margin-left"));var top=thumbPosition.top-((this.clone.outerHeight()-this.thumb.outerHeight())/2)-parseInt($("body").css("margin-top"));this.clone.css("top",top);this.clone.css("left",left);},hide:function(){if(this.clone){this.clone.remove();this.clone=null;}},cloneClick:function(){this.thumb.trigger("click");this.hide();this.show();}});})(jQuery);(function($){var methods={init:function(settings){var ret;this.each(function(){var $this=$(this);var wipetouch=$this.data("wipetouch");if(!wipetouch){wipetouch=new WipeTouch();}wipetouch.init($this,settings);$this.data("wipetouch",wipetouch);ret=ret?ret.add($this):$this;});return ret;},get:function(){var wipetouch=this.data("wipetouch");if(!wipetouch){$.error("Method get must be call after init on jQuery.wipetouch");}return wipetouch;}};$.extend($.fn,{wipetouch:function(method){if(methods[method]){return methods[method].apply(this,Array.prototype.slice.call(arguments,1));}else{if(typeof method==="object"||!method){return methods.init.apply(this,arguments);}else{$.error("Method "+method+" does not exist on jQuery.wipetouch");}}}});$.fn.wipetouch.defaults={moveX:40,moveY:40,preventDefault:true,allowDiagonal:false,allowVertical:true,allowHorizontal:true,tapToClick:false,wipeLeft:false,wipeRight:false,wipeUp:false,wipeDown:false,wipeUpLeft:false,wipeDownLeft:false,wipeUpRight:false,wipeDownRight:false,wipeMove:false};})(jQuery);function WipeTouch(){this.element=null;this.active=true;this.startX=false;this.startY=false;this.startDate=false;this.curX=false;this.curY=false;this.isMoving=false;this.touchedElement=false;}(function($){$.extend(WipeTouch.prototype,{init:function($element,settings){this.element=$element;this.settings=$.extend({},$.fn.wipetouch.defaults,settings||{});this.clear();this.resetTouch();if("ontouchstart" in document.documentElement){this.element[0].addEventListener("touchstart",$.proxy(this.onTouchStart,this),false);this.element[0].addEventListener("touchend",$.proxy(this.onTouchEnd,this),false);this.element[0].addEventListener("touchmove",$.proxy(this.onTouchMove,this),false);}this.active=true;},clear:function(){if("ontouchstart" in document.documentElement){this.element[0].removeEventListener("touchstart",$.proxy(this.onTouchStart,this),false);this.element[0].removeEventListener("touchend",$.proxy(this.onTouchEnd,this),false);this.element[0].removeEventListener("touchmove",$.proxy(this.onTouchMove,this),false);}},onTouchStart:function(e){if(this.settings.preventDefault){e.preventDefault();}if(!this.active){return;}if(!this.isMoving&&e.touches.length>0){this.startDate=new Date().getTime();this.startX=e.touches[0].pageX;this.startY=e.touches[0].pageY;this.curX=this.startX;this.curY=this.startY;this.isMoving=true;this.touchedElement=$(e.target);}},onTouchEnd:function(e){if(this.settings.preventDefault){e.preventDefault();}if(!this.active){return;}if(this.isMoving){this.touchCalculate(e);}},onTouchMove:function(e){if(this.settings.preventDefault){e.preventDefault();}if(!this.active){return;}if(this.isMoving){var result={};result.deltaX=e.touches[0].pageX-this.curX;result.deltaY=e.touches[0].pageY-this.curY;this.curX=e.touches[0].pageX;this.curY=e.touches[0].pageY;this.triggerEvent(this.settings.wipeMove,result);}},touchCalculate:function(e){var endDate=new Date().getTime();var ms=this.startDate-endDate;var x=this.curX;var y=this.curY;var dx=x-this.startX;var dy=y-this.startY;var ax=Math.abs(dx);var ay=Math.abs(dy);if(ax<this.settings.moveX&&ay<this.settings.moveY&&ms<100){if(this.touchedElement[0].nodeName=="#text"){this.touchedElement=this.touchedElement.parent();}this.touchedElement.trigger("click");this.resetTouch();return;}var toright=dx>0;var tobottom=dy>0;var s=((ax+ay)*60)/((ms)/15*(ms));if(s<1){s=1;}if(s>10){s=10;}var result={speed:parseInt(s),x:ax,y:ay};if(ax>=this.settings.moveX){if(this.settings.allowDiagonal&&ay>=this.settings.moveY){if(toright&&tobottom){this.triggerEvent(this.settings.wipeDownRight,result);}else{if(toright&&!tobottom){this.triggerEvent(this.settings.wipeUpRight,result);}else{if(!toright&&tobottom){this.triggerEvent(this.settings.wipeDownLeft,result);}else{this.triggerEvent(this.settings.wipeUpLeft,result);}}}}else{if(ax>=ay){if(this.settings.allowHorizontal){if(toright){this.triggerEvent(this.settings.wipeRight,result);}else{this.triggerEvent(this.settings.wipeLeft,result);}}else{if(tobottom){this.triggerEvent(this.settings.wipeDown,result);}else{this.triggerEvent(this.settings.wipeUp,result);}}}}}if(ay>=this.settings.moveY&&ay>ax){if(this.settings.allowVertical){if(tobottom){this.triggerEvent(this.settings.wipeDown,result);}else{this.triggerEvent(this.settings.wipeUp,result);}}else{if(toright){this.triggerEvent(this.settings.wipeRight,result);}else{this.triggerEvent(this.settings.wipeLeft,result);}}}if(this.settings.preventDefault){e.preventDefault();}this.resetTouch();},resetTouch:function(){this.startX=false;this.startY=false;this.startDate=false;this.isMoving=false;},start:function(){this.resetTouch();this.active=true;},stop:function(){this.active=false;this.resetTouch();},triggerEvent:function(wipeEvent,result){if(wipeEvent){wipeEvent(result);}}});})(jQuery);var Cookies={init:function(){var allCookies=document.cookie.split("; ");for(var i=0;i<allCookies.length;i++){var cookiePair=allCookies[i].split("=");this[cookiePair[0]]=cookiePair[1];}},create:function(name,value,days){if(days){var date=new Date();date.setTime(date.getTime()+(days*24*60*60*1000));var expires="; expires="+date.toGMTString();}else{var expires="";}document.cookie=name+"="+value+expires+"; path=/";this[name]=value;},erase:function(name){this.create(name,"",-1);this[name]=undefined;}};Cookies.init();var Hash={createId:function(relation,index){return relation+"-"+index;},parseId:function(hash){var urlId={relation:null,index:null};var matches=hash.replace("#","").match(/^(.+)-(\d+)/);if(matches){urlId.relation=matches[1];urlId.index=parseInt(matches[2]);}return urlId;},clear:function(){window.location.hash="_";}};(function($){var locationWrapper={put:function(hash,win){(win||window).location.hash=this.encoder(hash);},get:function(win){var hash=((win||window).location.hash).replace(/^#/,"");try{return/Mozilla/.test(navigator.userAgent)?hash:decodeURIComponent(hash);}catch(error){return hash;}},encoder:encodeURIComponent};var iframeWrapper={id:"__jQuery_history",init:function(){if($("#"+this.id).length==0){var html='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';$("body").prepend(html);}return this;},_document:function(){return $("#"+this.id)[0].contentWindow.document;},put:function(hash){var doc=this._document();doc.open();doc.close();locationWrapper.put(hash,doc);},get:function(){return locationWrapper.get(this._document());}};function initObjects(options){options=$.extend({unescape:false},options||{});locationWrapper.encoder=encoder(options.unescape);function encoder(unescape_){if(unescape_===true){return function(hash){return hash;};}if(typeof unescape_=="string"&&(unescape_=partialDecoder(unescape_.split("")))||typeof unescape_=="function"){return function(hash){return unescape_(encodeURIComponent(hash));};}return encodeURIComponent;}function partialDecoder(chars){var re=new RegExp($.map(chars,encodeURIComponent).join("|"),"ig");return function(enc){return enc.replace(re,decodeURIComponent);};}}var implementations={};implementations.base={callback:undefined,type:undefined,check:function(){},load:function(hash){},init:function(callback,options){initObjects(options);self.callback=callback;self._options=options;self._init();},_init:function(){},_options:{}};implementations.timer={_appState:undefined,_init:function(){var current_hash=locationWrapper.get();self._appState=current_hash;self.callback(current_hash);setInterval(self.check,100);},check:function(){var current_hash=locationWrapper.get();if(current_hash!=self._appState){self._appState=current_hash;if(!self.hashLoaded){self.callback(current_hash);}}self.hashLoaded=false;},load:function(hash){if(hash!=self._appState){self.hashLoaded=true;locationWrapper.put(hash);self._appState=hash;}}};implementations.iframeTimer={_appState:undefined,_init:function(){var current_hash=locationWrapper.get();self._appState=current_hash;iframeWrapper.init().put(current_hash);self.callback(current_hash);setInterval(self.check,100);},check:function(){var iframe_hash=iframeWrapper.get(),location_hash=locationWrapper.get();if(location_hash!=iframe_hash){if(location_hash==self._appState){self._appState=iframe_hash;locationWrapper.put(iframe_hash);self.callback(iframe_hash);}else{self._appState=location_hash;iframeWrapper.put(location_hash);}}self.hashLoaded=false;},load:function(hash){if(hash!=self._appState){self.hashLoaded=true;locationWrapper.put(hash);iframeWrapper.put(hash);self._appState=hash;}}};implementations.hashchangeEvent={_init:function(){self.callback(locationWrapper.get());$(window).bind("hashchange",self.check);},check:function(){if(!self.hashLoaded){self.callback(locationWrapper.get());}self.hashLoaded=false;},load:function(hash){self.hashLoaded=true;locationWrapper.put(hash);}};var self=$.extend({},implementations.base);if(/MSIE [0-7]]/.test(navigator.userAgent)){self.type="iframeTimer";}else{if("onhashchange" in window){self.type="hashchangeEvent";}else{self.type="timer";}}$.extend(self,implementations[self.type]);$.history=self;})(jQuery);(function($){var types=["DOMMouseScroll","mousewheel"];if($.event.fixHooks){for(var i=types.length;i;){$.event.fixHooks[types[--i]]=$.event.mouseHooks;}}$.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=types.length;i;){this.addEventListener(types[--i],handler,false);}}else{this.onmousewheel=handler;}},teardown:function(){if(this.removeEventListener){for(var i=types.length;i;){this.removeEventListener(types[--i],handler,false);}}else{this.onmousewheel=null;}}};$.fn.extend({mousewheel:function(fn){return fn?this.bind("mousewheel",fn):this.trigger("mousewheel");},unmousewheel:function(fn){return this.unbind("mousewheel",fn);}});function handler(event){var orgEvent=event||window.event,args=[].slice.call(arguments,1),delta=0,returnValue=true,deltaX=0,deltaY=0;event=$.event.fix(orgEvent);event.type="mousewheel";if(orgEvent.wheelDelta){delta=orgEvent.wheelDelta/120;}if(orgEvent.detail){delta=-orgEvent.detail/3;}deltaY=delta;if(orgEvent.axis!==undefined&&orgEvent.axis===orgEvent.HORIZONTAL_AXIS){deltaY=0;deltaX=-1*delta;}if(orgEvent.wheelDeltaY!==undefined){deltaY=orgEvent.wheelDeltaY/120;}if(orgEvent.wheelDeltaX!==undefined){deltaX=-1*orgEvent.wheelDeltaX/120;}args.unshift(event,delta,deltaX,deltaY);return($.event.dispatch||$.event.handle).apply(this,args);}})(jQuery);function Tooltip(holder,settings){this.settings=settings;this.holder=holder;if(this.isActive()){this.createHtml();this.timer=null;this.tooltip=this.holder.find(".zsTooltip");this.slides=this.holder.find(".zsSlide");this.closeBt=this.holder.find(".zsCloseBt");this.closeBt.click(jQuery.proxy(this.hide,this));}}(function($){$.extend(Tooltip.prototype,{show:function(){if(!this.isActive()){return;}Cookies.create(this.settings.cookies.name,true,this.settings.cookies.expiration);this.activeSlideIndex=0;this.tooltip.show();this.hideSlides();this.timer=setInterval($.proxy(this.nextSlide,this),this.settings.slideshowSpeed);},hide:function(){if(this.tooltip){this.clearTimer();this.tooltip.hide();}},nextSlide:function(){var activeSlide=$(this.slides[this.activeSlideIndex]);activeSlide.css("z-index",1);this.activeSlideIndex=(this.activeSlideIndex+1)%this.slides.length;var newSlide=$(this.slides[this.activeSlideIndex]);newSlide.show();newSlide.css("z-index",2);},hideSlides:function(){this.slides.hide();$(this.slides[this.activeSlideIndex]).show();},clearTimer:function(){if(this.timer){clearInterval(this.timer);this.timer=null;}},createHtml:function(){this.holder.append($('<div class="zsTooltip"/>').append($('<div class="zsSlides"/>').append($('<div class="zsSlide keys"/>'),$('<div class="zsSlide mousewheel"/>'),$('<div class="zsSlide trackpad"/>')),$('<div class="zsText">'+Translate.t("tooltip",this.settings.language)+"</div>"),$('<div class="zsCloseBt"/>').append($('<span class="zsIcon"/>'))));},isActive:function(){return this.settings.active&&!Cookies[this.settings.cookies.name];}});})(jQuery);var translations;var defaultTranslations={en:{tooltip:"To navigate between photos you can use <strong>arrow keys</strong> on your keyboard, <strong>mousewheel</strong> or <strong>swipe 2 fingers</strong> on your touchpad.",loading:"Loading..."}};var Translate={t:function(message,language){translations=jQuery.extend(true,defaultTranslations,translations||{});if(typeof translations!="undefined"&&translations[language]&&translations[language][message]){return translations[language][message];}return message;}};function Model_Abstract(){this.urlId=null;this.index=null;}(function($){$.extend(Model_Abstract.prototype,{isRelated:function(){var relation=this.element.data("zs-gallery");if(relation){return true;}return false;},isLoaded:function(){return this.loaded;},isPreloaded:function(){return this.preloaded;},getRelation:function(){return this.element.data("zs-gallery");},click:function(callback){this.clickCallback=function(event){event.preventDefault();callback();};this.element.click(this.clickCallback);},setUrlId:function(urlId){this.urlId=urlId;},hasUrlId:function(){return this.urlId!=null;},getUrlId:function(){return this.urlId;},setIndex:function(index){this.index=index;}});})(jQuery);var Model_Factory={getItem:function($element,settings){var imageSettings=settings.image;imageSettings.pluginPath=settings.pluginPath;return new Model_Image($element,imageSettings);}};function Model_Image($element,settings){this.element=$element;this.settings=settings;this.view=null;this.image=null;this.loaded=false;this.preloaded=false;this.dimensions={width:0,height:0};this.title=this.element.data("zs-title");this.text=this.element.data("zs-text");this.thumbImageSrc=this.element.data("zs-thumb-image");if(!this.thumbImageSrc){var thumbImage=this.element.find("img")[0];this.thumbImageSrc=thumbImage?thumbImage.src:null;}this.imageSrc=this.getSource();if(this.element.data("zs-preloading-image")){this.preloadingImageSrc=this.element.data("zs-preloading-image");this.preloadingImageSrc=this.parseSrcWithDimensions(this.preloadingImageSrc);}}(function($){$.extend(Model_Image.prototype,Model_Abstract.prototype,{getSource:function(){var source=this.element.attr("href");var device=View_Factory.getDevice().name.toLowerCase();if(this.element.data("zs-"+device+"-image")){source=this.parseSrcWithDimensions(this.element.data("zs-"+device+"-image"));}if(this.settings.disableCache){var date=new Date();source+="?nc="+date.getTime();}return source;},parseSrcWithDimensions:function(src){var exp=new RegExp("^(.+)"+this.settings.dimensionsSeparator+"(\\d+)x(\\d+)$");var matches=src.match(exp);if(matches){src=matches[1];if(!this.preloadingImageWidth){this.preloadingImageWidth=matches[2];this.preloadingImageHeight=matches[3];}}return src;},load:function(view){this.view=view;if(this.loaded){if(this.view){this.view.itemLoaded(this.index);}return;}if(this.view){this.view.itemLoading(this.index);}if(this.preloaded){if(this.view){this.view.itemPreloaded(this.index);}return;}if(this.hasPreloadingContent()&&!this.preloadingImage){this.preloadingImage=new Image();this.preloadingImage.onload=$.proxy(function(){this.preloaded=true;if(view&&!this.loaded){setTimeout($.proxy(function(){view.itemPreloaded(this.index);},this),0);}},this);this.preloadingImage.src=this.preloadingImageSrc;if(this.preloadingImage.complete&&view){this.preloaded=true;setTimeout($.proxy(function(){view.itemPreloaded(this.index);},this),0);}}if(!this.image){this.image=new Image();this.image.onload=$.proxy(function(){if(view){setTimeout($.proxy(function(){this.loaded=true;view.itemLoaded(this.index);},this),500);}else{this.loaded=true;}},this);this.image.src=this.imageSrc;if(this.image.complete&&view){this.loaded=true;setTimeout($.proxy(function(){view.itemLoaded(this.index);},this),0);}}},calculateDimensions:function(width,height){if(!this.view){return;}var newWidth=width;var newHeight=height;var viewport=this.view.getViewport();var heightRatio=viewport.height/height;var widthRatio=viewport.width/width;this.marginTop=null;if(this.view.settings.contentMode.fillArea&&this.view.hasCustomContainer()){if(height>=viewport.height&&width>=viewport.width){if(heightRatio<=widthRatio){newWidth=viewport.width;newHeight=newWidth*(height/width);}else{newHeight=viewport.height;newWidth=newHeight*(width/height);}}var marginTop=(viewport.height-newHeight)/2;this.marginTop=marginTop<0?marginTop:null;}else{if(heightRatio<1&&heightRatio<=widthRatio){newHeight=viewport.height;}if(widthRatio<1&&widthRatio<heightRatio){newHeight=Math.floor(width*widthRatio*(height/width));}newHeight=Math.max(newHeight,this.settings.minSize);newWidth=Math.floor(newHeight*(width/height));}this.dimensions={width:newWidth,height:newHeight};},hasDescription:function(){return this.title||this.text;},html:function(){var html="";if(!this.loaded){if(this.hasPreloadingContent()){html=this.loadingHtml();}}else{html=this.loadedHtml();}return html;},thumbHtml:function(selected){var selectedClass=selected?"selected":"";if(!this.thumbImageSrc){return'<div class="zsThumb empty '+selectedClass+'"><span class="zsBorder"></span></div>';}return'<div class="zsThumb '+selectedClass+'"><img src="'+this.thumbImageSrc+'" alt=""/><span class="zsBorder"></span></div>';},loadedHtml:function(){this.calculateDimensions(this.image.width,this.image.height);var style="";if(this.marginTop&&this.view.deviceType!="mobile"){style='style="margin-top: '+this.marginTop+'px;"';}return'<img src="'+this.image.src+'" alt="" '+style+' width="'+this.dimensions.width+'" height="'+this.dimensions.height+'" />';},loadingHtml:function(){var src;this.calculateDimensions(this.preloadingImageWidth,this.preloadingImageHeight);if(this.hasPreloadingContent()){if(this.preloadingImage&&this.preloadingImage.complete){src=this.preloadingImageSrc;}else{src=this.settings.pluginPath.replace(/\/$/,"")+"/themes/"+this.view.settings.theme+"/images/blank.gif";}}if(src){var style="";if(this.marginTop&&this.view.deviceType!="mobile"){style='style="margin-top: '+this.marginTop+'px;"';}return'<img src="'+src+'" alt="" '+style+' width="'+this.dimensions.width+'" height="'+this.dimensions.height+'" />';}return"";},hasPreloadingContent:function(){return this.preloadingImageSrc;}});})(jQuery);function View_Abstract(){}(function($){$.extend(View_Abstract.prototype,{init:function(settings){this.setSettings(settings);this.container=this.getContainer();if(!this.initialized){this.renderingItem=null;this.items=[];this.actualIndex=0;this.mouseWheelLocked=false;this.keyLocked=false;this.viewport=null;this.createHtml();this.onInit();this.hide();this.initialized=true;}return this;},setSettings:function(settings){this.settings=settings;return this;},showOverlay:function(){if(this.overlay&&this.overlay.is(":visible")){return;}this.windowScrollLeft=$(window).scrollLeft();this.windowScrollTop=$(window).scrollTop();if(!this.hasCustomContainer()){$("html").addClass("zoomscriptActive");}this.setTheme();this.refreshPosition();this.overlay.show();this.clearContent();this.hideHeaderFooter();if(this.thumbs){if(this.settings.thumbs.active){this.thumbs.show();}else{if(this.thumbs){this.thumbs.hide();}}}this.onShowOverlay();this.adjustViewport();},setTheme:function(){jQuery.each(zsThemesCss,$.proxy(function(name,css){this.overlay.removeClass("zs"+ucfirst(name));},this));this.overlay.addClass("zs"+ucfirst(this.settings.theme));},hideOverlay:function(){if(this.fullscreenMode){this.toggleFullscreen();return;}if(this.hasCustomContainer()){return;}this.hide();if(this.settings.history){Hash.clear();}},hide:function(){this.items=[];this.actualIndex=0;this.renderingItem=null;this.overlay.hide();$("html").removeClass("zoomscriptActive");this.onHideOverlay();},showItem:function(item,restoreFromUrl){this.showOverlay();this.showItemDelayed(item,restoreFromUrl);},showItemDelayed:function(item,restoreFromUrl){this.items=[];this.items.push(item);this.thumbsSlider=null;this.pager.hide();this.onShowItem(restoreFromUrl);this.render();},showItems:function(items,index,restoreFromUrl){if(items.length==1){this.showItem(items[index]);return;}this.showOverlay();this.showItemsDelayed(items,index,restoreFromUrl);},showItemsDelayed:function(items,index,restoreFromUrl){this.items=items;this.actualIndex=index;if(this.settings.thumbs.active){this.createThumbsHtml();var thumbsSliderSettings=this.getThumbsSliderSettings();this.thumbsSliderHolder.verticalSlider(thumbsSliderSettings);this.thumbsSlider=this.thumbsSliderHolder.verticalSlider("get");this.adjustThumbSliderPostion();}this.updatePager();this.onShowItems(restoreFromUrl);this.render();},prevItem:function(){if(this.actualIndex>0){this.actualIndex--;if(this.thumbsSlider){this.thumbsSlider.selectItem(this.actualIndex,true,false);}this.updatePager();this.onPrevItem();this.render();}},nextItem:function(){if(this.actualIndex<this.items.length-1){this.actualIndex++;if(this.thumbsSlider){this.thumbsSlider.selectItem(this.actualIndex,true,false);}this.updatePager();this.onNextItem();this.render();}},selectItem:function(index){if(this.actualIndex!=index){this.actualIndex=index;if(this.thumbsSlider){this.thumbsSlider.selectItem(this.actualIndex,true,true);}this.updatePager();this.onSelectItem();this.render();}},updatePager:function(){if(this.pager){this.pager.show();this.pagerPage.html(this.actualIndex+1);this.pagerCount.html(this.items.length);}},showHeaderFooter:function(){if(this.itemHeaderHolder){this.itemHeaderHolder.css("visibility","visible");}if(this.itemFooterHolder){this.itemFooterHolder.css("visibility","visible");}},hideHeaderFooter:function(){if(this.itemHeaderHolder){this.itemHeaderHolder.css("visibility","hidden");}if(this.itemFooterHolder){this.itemFooterHolder.css("visibility","hidden");}},render:function(){var item=this.items[this.actualIndex];if(!item){return;}this.renderingItem=item;item.load(this);if(item.hasUrlId()){jQuery.history.load(item.getUrlId());}},clearContent:function(){this.itemContent.html("");this.itemContent.width(0);this.itemContentHolder.width(0);},updateContent:function(index){var item=this.items[index];if(!item){return;}this.itemHolder.removeClass("zsLoading");this.itemContent.html(item.html());this.itemHolder.width(item.dimensions.width);this.itemContent.width(item.dimensions.width);if(this.hasCustomContainer()&&this.settings.contentMode.fillArea){var viewport=this.getViewport();this.itemContent.height(Math.min(viewport.height,item.dimensions.height));}else{this.itemContent.height("auto");}this.itemContentHolder.width(item.dimensions.width);if(!this.itemContent[0].innerHTML){this.itemHolder.addClass("zsLoading");this.hideHeaderFooter();}this.itemDescription.hide();this.miniItemDescription.hide();if(item.hasDescription()){this.itemDescription.show();if(!this.fullscreenMode){this.miniItemDescription.show();}this.itemDescription.click(function(event){event.stopPropagation();});this.itemDescriptionTitle.hide();this.miniItemDescriptionTitle.hide();this.itemDescriptionText.hide();this.miniItemDescriptionText.hide();if(item.title){this.itemDescriptionTitle.show();this.miniItemDescriptionTitle.show();this.itemDescriptionTitle.html(item.title);this.miniItemDescriptionTitle.html(item.title);}if(item.text){this.itemDescriptionText.show();this.miniItemDescriptionText.show();this.itemDescriptionText.html(item.text);this.miniItemDescriptionText.html(item.text);}}var top=Math.round((this.content.height()-this.itemHolder.outerHeight(true))/2);var left=Math.round((this.content.width()-this.itemHolder.outerWidth(true))/2);this.itemHolder.css("top",top);this.itemHolder.css("left",left);},refreshPosition:function(){if(!this.hasCustomContainer()){this.overlay.css("top",$(window).scrollTop());this.overlay.css("left",$(window).scrollLeft());}},getViewport:function(){return this.viewport;},itemLoading:function(index){if(this.items[index]==this.renderingItem){this.clearContent();this.updateContent(index);this.showPreloader(index);}},itemLoaded:function(index){if(this.items[index]==this.renderingItem){this.updateContent(index);this.hidePreloader(index);this.showHeaderFooter();if(this.settings.cacheItems>0&&this.items.length>1){var startIndex=Math.max(0,this.actualIndex-this.settings.cacheItems);var stopIndex=Math.min(this.items.length-1,this.actualIndex+this.settings.cacheItems);for(var i=startIndex;i<=stopIndex;i++){if(i!=this.actualIndex){this.items[i].load(this);}}}}},itemPreloaded:function(index){if(this.items[index]==this.renderingItem){this.updateContent(index);}},showPreloader:function(index){this.preloaderTimer=setTimeout($.proxy(function(){this.preloader.show();},this),this.settings.showPreloaderAfter);},hidePreloader:function(index){if(this.preloaderTimer){clearTimeout(this.preloaderTimer);this.preloaderTimer=null;}this.preloader.hide();},getDescriptionMaxHeight:function(){return 0;var descriptionVisible=this.itemDescription.is(":visible");var titleVisible=this.itemDescriptionTitle.is(":visible");var textVisible=this.itemDescriptionText.is(":visible");this.itemDescription.show();this.itemDescriptionTitle.show();this.itemDescriptionText.show();var titleSpacer=$("<div/>");var textSpacer=$("<div/>");this.itemDescriptionTitle.append(titleSpacer);this.itemDescriptionText.append(textSpacer);titleSpacer.height(500);textSpacer.height(500);var height=this.itemDescription.outerHeight();titleSpacer.remove();textSpacer.remove();if(!descriptionVisible){this.itemDescription.hide();}if(!titleVisible){this.itemDescriptionTitle.hide();}if(!textVisible){this.itemDescriptionText.hide();}return height;},hasCustomContainer:function(){return this.settings.contentMode.containerId!="body";},getContainer:function(){var container=$("body");if(this.hasCustomContainer()){container=$("#"+this.settings.contentMode.containerId);container.css("position","relative");}return container;},toggleFullscreen:function(){if(!this.originalContainerId){this.originalContainerId=this.settings.contentMode.containerId;}if(this.fullscreenMode){this.settings.contentMode.containerId=this.originalContainerId;this.container.append(this.overlay);this.fullscreenMode=false;this.overlay.addClass("zsMini");this.overlay.attr("style",null);this.adjustMiniMode();}else{this.settings.contentMode.containerId="body";$("body").append(this.overlay);this.fullscreenMode=true;this.overlay.removeClass("zsMini");this.adjustFullscreenMode();}this.overlay.hide();$("html").removeClass("zoomscriptActive");this.showItems(this.items,this.actualIndex);},adjustMiniMode:function(){},adjustFullscreenMode:function(){}});})(jQuery);var zsViews={};var View_Factory={devices:["mobile","monitor"],getView:function(settings){if(!zsViews[settings.contentMode.containerId]){var device=this.getDevice();var ViewClass="View_"+this.capitalize(device.name);eval('zsViews["'+settings.contentMode.containerId+'"] = new '+ViewClass+"();");}var mergedSettings=this.mergeSettings(settings,zsViews[settings.contentMode.containerId].deviceType);return zsViews[settings.contentMode.containerId].init(mergedSettings);},getDevice:function(){if(navigator.userAgent.match(/iPad/i)!=null){return{type:"mobile",name:"iPad"};}else{if(navigator.userAgent.match(/iPhone/i)!=null){return{type:"mobile",name:"iPhone"};}else{if(navigator.userAgent.match(/iPod/i)!=null){return{type:"mobile",name:"iPhone"};}else{if(navigator.userAgent.match(/Android/i)!=null){if(navigator.userAgent.match(/mobile/i)!=null){return{type:"mobile",name:"Android"};}return{type:"mobile",name:"Androidtablet"};}}}}return{type:"monitor",name:"monitor"};},mergeSettings:function(settings,device){var deviceSettings=jQuery.extend({},settings[device]||{});var newSettings=jQuery.extend({},settings);jQuery.each(this.devices,function(index,deviceType){delete newSettings[deviceType];});return jQuery.extend(true,{},newSettings,deviceSettings);},capitalize:function(name){return name.charAt(0).toUpperCase()+name.slice(1);}};function View_Monitor(){this.deviceType="monitor";}(function($){$.extend(View_Monitor.prototype,View_Abstract.prototype,{onInit:function(){this.overlay=this.container.find(".zoomscript");this.content=this.overlay.find(".zsContent");this.thumbs=this.overlay.find(".zsThumbs");this.itemHolder=this.overlay.find(".zsItemHolder");this.itemHeaderHolder=this.itemHolder.find(".zsItemHeaderHolder");this.itemFooterHolder=this.itemHolder.find(".zsItemFooterHolder");this.itemContent=this.itemHolder.find(".zsItemContent");this.itemContentHolder=this.itemHolder.find(".zsItemContentHolder");this.itemDescription=this.itemHolder.find(".zsItemDescription");this.itemDescriptionTitle=this.itemDescription.find(".zsTitle");this.itemDescriptionText=this.itemDescription.find(".zsText");this.preloader=this.overlay.find(".zsPreloader");this.navHolder=this.overlay.find(".zsNavHolder");this.prevItemNav=this.overlay.find(".zsPrevItem");this.nextItemNav=this.overlay.find(".zsNextItem");this.thumbsSliderHolder=this.thumbs.find(".zsThumbsSlider");this.thumbsSliderPane=this.thumbs.find(".pane");this.closeBt=this.overlay.find(".zsClose");this.miniHolder=this.overlay.find(".zsMiniHolder");this.miniNavHolder=this.overlay.find(".zsMiniNavHolder");this.prevItemMiniNav=this.miniNavHolder.find(".zsPrevItem");this.nextItemMiniNav=this.miniNavHolder.find(".zsNextItem");this.fullscreenBt=this.miniNavHolder.find(".zsFullscreen");this.miniItemDescription=this.miniHolder.find(".zsItemDescription");this.miniItemDescriptionTitle=this.miniItemDescription.find(".zsTitle");this.miniItemDescriptionText=this.miniItemDescription.find(".zsText");this.pager=this.overlay.find(".zsPager");this.pagerPage=this.overlay.find(".zsPager .zsPage");this.pagerCount=this.overlay.find(".zsPager .zsCount");this.header=this.overlay.find(".zsPager .zsCount");this.tooltip=new Tooltip(this.overlay,this.getTooltipSettings());if(this.hasCustomContainer()){this.tooltip.hide();}},onShowOverlay:function(){if(!this.hasCustomContainer()){this.resizeEvent=$.proxy(this.resize,this);$(window).resize(this.resizeEvent);this.keyUpHandler=$.proxy(function(event){this.keyUp(event);},this);this.keyDownHandler=$.proxy(function(event){this.keyDown(event);},this);$(document).keydown(this.keyDownHandler);$(document).keyup(this.keyUpHandler);this.tooltip.show();}else{this.adjustMiniMode();}},onHideOverlay:function(){this.thumbs.hide();this.tooltip.hide();$(window).unbind("resize",this.resizeEvent);$(document).unbind("keyup",this.keyUpHandler);$(document).unbind("keydown",this.keyDownHandler);},onShowItem:function(){this.adjustNavigation();this.thumbs.hide();this.adjustViewport();},onShowItems:function(){this.adjustNavigation();},onPrevItem:function(){this.adjustNavigation();},onNextItem:function(){this.adjustNavigation();},onSelectItem:function(){this.adjustNavigation();},getThumbsSliderSettings:function(){var settings=$.extend({},this.settings.slider,{mouseWheelContainer:this.thumbs,createNavigation:false,enableKeys:true});if(this.hasCustomContainer()){settings.enableKeys=false;}return settings;},getTooltipSettings:function(){return $.extend({},this.settings.tooltip,{language:this.settings.language});},resize:function(){clearTimeout(this.resizeTimer);this.resizeTimer=setTimeout($.proxy(this.resizeDelayed,this),10);},resizeDelayed:function(){this.adjustViewport();this.render();},adjustNavigation:function(){this.prevItemNav.show();this.nextItemNav.show();if(this.items.length==1){this.prevItemNav.hide();this.nextItemNav.hide();this.navHolder.addClass("disabled");this.content.unmousewheel();}else{this.prevItemNav.removeClass("disabled");this.nextItemNav.removeClass("disabled");this.prevItemMiniNav.removeClass("disabled");this.nextItemMiniNav.removeClass("disabled");this.navHolder.removeClass("disabled");if(this.actualIndex==0){this.prevItemMiniNav.addClass("disabled");this.prevItemNav.addClass("disabled");}if(this.actualIndex==this.items.length-1){this.nextItemMiniNav.addClass("disabled");this.nextItemNav.addClass("disabled");this.navHolder.addClass("disabled");}this.content.mousewheel($.proxy(this.mouseWheel,this));}},adjustViewport:function(){if(this.thumbs.is(":visible")){this.content.width(this.overlay.width()-this.thumbs.outerWidth(true));this.thumbs.height(this.overlay.height()-this.thumbs.outerHeight(true)+this.thumbs.height());if(this.thumbsSlider){this.thumbsSlider.refreshItems(true);}this.adjustThumbSliderPostion();}else{this.content.width(this.overlay.width());}this.content.height(this.overlay.height());var height=this.content.height();var width=this.content.width();var borderBottom=parseInt(this.itemHolder.css("border-bottom-width"));var borderTop=parseInt(this.itemHolder.css("border-top-width"));var borderLeft=parseInt(this.itemHolder.css("border-left-width"));var borderRight=parseInt(this.itemHolder.css("border-right-width"));if(this.itemHeaderHolder.is(":visible")){height-=parseInt(this.itemHeaderHolder.height());}if(this.itemFooterHolder.is(":visible")){height-=parseInt(this.itemFooterHolder.height());}if(!isNaN(borderBottom)){height-=borderBottom;}if(!isNaN(borderTop)){height-=borderTop;}width-=parseInt(this.itemHolder.css("margin-left"));width-=parseInt(this.itemHolder.css("margin-right"));if(!isNaN(borderLeft)){width-=borderLeft;}if(!isNaN(borderRight)){width-=borderRight;}this.viewport={width:width,height:height};},adjustThumbSliderPostion:function(){var top=Math.round(this.thumbs.height()-this.thumbsSliderHolder.height())/2;top=Math.max(top,0);this.thumbsSliderHolder.css("top",top);},mouseWheel:function(event,delta){if(!this.settings.contentMode.mouseWheelActive&&!this.fullscreenMode&&this.hasCustomContainer()){return true;}event.preventDefault();if(this.mouseWheelLocked){return;}this.mouseWheelLocked=true;if(delta<0){this.nextItem();}if(delta>0){this.prevItem();}setTimeout($.proxy(this.mouseWheelUnlock,this),this.itemNavigationLockDuration);},mouseWheelUnlock:function(){this.mouseWheelLocked=false;},keyUp:function(event){var code=event.charCode||event.keyCode;switch(code){case 27:this.hideOverlay();break;}},keyDown:function(event){if(this.keyLocked){return;}this.keyLocked=true;setTimeout($.proxy(this.keyUnlock,this),this.itemNavigationLockDuration);var code=event.charCode||event.keyCode;switch(code){case 37:this.prevItem();break;case 39:this.nextItem();break;case 38:if(this.items.length==1){event.preventDefault();break;}case 40:if(this.items.length==1){event.preventDefault();break;}default:break;}},keyUnlock:function(){this.keyLocked=false;},createHtml:function(){if(this.overlay){return;}if(this.container.find(".zoomscript").length==0){var overlay=$('<div class="zoomscript '+(this.hasCustomContainer()?"zsMini ":"")+"zs"+ucfirst(this.settings.thumbs.position)+'"/>');this.container.append(overlay.append($('<div class="zsContent">').append($('<div class="zsItemHolder"/>').append($('<div class="zsItemHeaderHolder"/>').append($('<div class="zsPager"/>').append($('<span class="zsPage"/>'),"/",$('<span class="zsCount"/>')),$('<div class="zsClose">').append($('<span class="zsIcon"/>'),Translate.t("Close",this.settings.language))),$('<div class="zsItemContentHolder"/>').append($('<div class="zsItemContent"/>'),$('<div class="zsPreloader">'+Translate.t("loading",this.settings.language)+"</div>"),$('<div class="zsNavHolder"/>').append($('<div class="zsNavBt zsPrevItem"><span class="zsIcon"></span></div>'),$('<div class="zsNavBt zsNextItem"><span class="zsIcon"></span></div>'),$('<div class="zsItemDescription"/>').append($('<div class="zsPadding"/>').append($('<span class="zsTitle"/>'),$('<span class="zsText"/>'))))),$('<div class="zsItemFooterHolder"/>'))),$('<div class="zsThumbs">').append($('<div class="zsThumbsSlider">'))));overlay.find(".zsThumbsSlider").verticalSlider(this.getThumbsSliderSettings());overlay.find(".zsNavHolder").click($.proxy(this.nextItem,this));overlay.find(".zsPrevItem").click($.proxy(function(event){event.stopPropagation();this.prevItem();},this));overlay.find(".zsNextItem").click($.proxy(function(event){event.stopPropagation();this.nextItem();},this));overlay.find(".zsItemHolder").click(function(event){event.stopPropagation();});overlay.find(".zsContent").click($.proxy(this.hideOverlay,this));overlay.find(".zsClose").click($.proxy(this.hideOverlay,this));if(this.hasCustomContainer()){overlay.find(".zsContent").append($('<div class="zsMiniHolder"/>').append($('<div class="zsMiniNavHolder"/>').append($('<div class="zsMiniBt zsPrevItem"></div>'),$('<div class="zsMiniBt zsFullscreen"></div>'),$('<div class="zsMiniBt zsNextItem"></div>')),$('<div class="zsItemDescription"/>').append($('<div class="zsPadding"/>').append($('<span class="zsTitle"/>'),$('<span class="zsText"/>')))));overlay.find(".zsMiniNavHolder .zsFullscreen").click($.proxy(function(event){event.stopPropagation();this.toggleFullscreen();},this));overlay.find(".zsMiniNavHolder .zsPrevItem").click($.proxy(function(event){event.stopPropagation();this.prevItem();},this));overlay.find(".zsMiniNavHolder .zsNextItem").click($.proxy(function(event){event.stopPropagation();this.nextItem();},this));overlay.find(".zsNavHolder").hide();}if(zsFreeLicence||this.settings.logo.active){var defaultImage=false;if(zsFreeLicence||!this.settings.logo.imagePath){this.settings.logo.url="http://www.zoomscript.com";this.settings.logo.imagePath=zsBrandImageSource;defaultImage=true;}if(this.settings.logo.url){overlay.find(".zsItemFooterHolder").append($('<a target="_blank"/>').append($('<img src="" class="zsBrandImage" alt="" />')));}else{overlay.find(".zsItemFooterHolder").append($('<img src="" class="zsBrandImage" alt="" />'));}overlay.find(".zsBrandImage").attr("src",this.settings.logo.imagePath);overlay.find(".zsItemFooterHolder a").attr("href",this.settings.logo.url);if(defaultImage){overlay.find(".zsItemFooterHolder a").addClass("zsDefault");}}}},createThumbsHtml:function(){this.thumbs.show();this.thumbsSliderPane.html("");jQuery.each(this.items,$.proxy(function(i,item){var selected=i==this.actualIndex;var thumb=$(item.thumbHtml(selected));this.thumbsSliderPane.append(thumb);thumb.click($.proxy(function(){this.selectItem(i);},this));},this));},adjustMiniMode:function(){this.navHolder.hide();this.miniNavHolder.show();this.tooltip.hide();this.itemHeaderHolder.hide();this.itemFooterHolder.hide();},adjustFullscreenMode:function(){this.navHolder.show();this.miniNavHolder.hide();this.itemHeaderHolder.show();this.itemFooterHolder.show();}});})(jQuery);function View_Mobile(){}(function($){$.extend(View_Mobile.prototype,View_Abstract.prototype,{onInit:function(){this.overlay=this.container.find(".zoomscript");this.bodyContent=this.container.find(".zoomscriptBody");this.itemDescription=this.overlay.find(".zsItemDescription");this.itemDescriptionTitle=this.overlay.find(".zsTitle");this.itemDescriptionText=this.overlay.find(".zsText");this.topPanel=this.overlay.find(".zsTopPanel");this.bottomPanel=this.overlay.find(".zsBottomPanel");this.closeBt=this.overlay.find(".zsCloseBt");this.fullscreenBt=this.overlay.find(".zsFullscreen");this.thumbsSliderHolder=this.bottomPanel.find(".zsThumbsSlider");this.thumbsSliderPane=this.thumbsSliderHolder.find(".pane");this.contentSliderHolder=this.overlay.find(".zsContentSlider");this.contentSliderPane=this.contentSliderHolder.find(".pane");this.preloaderTimers={};this.pager=this.overlay.find(".zsPager");this.pagerPage=this.overlay.find(".zsPager .zsPage");this.pagerCount=this.overlay.find(".zsPager .zsCount");this.afterRefreshTime=0;this.initPreloader=this.overlay.find(".zsPreloader.init");},onShowOverlay:function(){if(!this.hasCustomContainer()){this.initPreloader.show();this.originalMetaViewport=$("head meta[name=viewport]");$("head meta[name=viewport]").remove();$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />');this.refresh();this.topPanel.show();this.bottomPanel.show();this.hidePanelsTimerActive=true;this.orientationEvent="onorientationchange" in window?"orientationchange":"resize";this.resizeEvent=$.proxy(this.resize,this);$(window).bind(this.orientationEvent,this.resizeEvent);}else{this.hidePanels();this.adjustMiniMode();}},onHideOverlay:function(){if(this.originalMetaViewport){$("head meta[name=viewport]").remove();if(this.originalMetaViewport.length==0){this.originalMetaViewport='<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10.0, minimum-scale=0.1, user-scalable=1" />';}$("head").prepend(this.originalMetaViewport);}$(window).unbind(this.orientationEvent,this.resizeEvent);if(this.itemContents){$.each(this.itemContents,function(){$(this).html("");});}if(this.hideBodyContent){this.bodyContent.attr("style","");setTimeout($.proxy(function(){$(window).scrollTop(this.windowScrollTop);},this),0);var timer=setInterval($.proxy(function(){if($(window).scrollTop()==this.windowScrollTop){$(window).scrollLeft(this.windowScrollLeft);clearInterval(timer);}},this),100);}},onShowItem:function(restoreFromUrl){if(!this.hasCustomContainer()){this.showPanels();}this.createContentSlider();if(restoreFromUrl){this.restorePositionAfterRefresh();}},onShowItems:function(restoreFromUrl){if(!this.hasCustomContainer()){this.showPanels();}this.createContentSlider();if(restoreFromUrl){this.restorePositionAfterRefresh();}},onPrevItem:function(){this.contentSlider.selectItem(0,false,false);this.deleteItemHtml(this.actualIndex+2);this.createItemHtml(this.actualIndex-1,"before");if(this.hideNavBar){this.hideNavigationBar();}this.adjustMiniTopbar();},onNextItem:function(){this.contentSlider.selectItem(this.actualIndex==1?1:2,false,false);this.deleteItemHtml(this.actualIndex-2);this.createItemHtml(this.actualIndex+1,"after");if(this.hideNavBar){this.hideNavigationBar();}this.adjustMiniTopbar();},onSelectItem:function(){this.hidePanelsTimeout();this.createContentSlider();if(this.hideNavBar){this.hideNavigationBar();}this.adjustMiniTopbar();},restorePositionAfterRefresh:function(){},refresh:function(resize){if(this.hideBodyContent){this.bodyContent.height("5000");$(window).scrollLeft(0);}if(this.hideNavBar){this.hideNavigationBar(resize);}this.adjustOverlayDimensions();this.refreshPosition();this.adjustViewport();this.overlay.removeClass("landscape");this.overlay.removeClass("portrait");if($(window).height()>$(window).width()){this.overlay.addClass("portrait");}else{this.overlay.addClass("landscape");}},adjustOverlayDimensions:function(){},hideNavigationBar:function(resize){this.navBarHidden=false;$(window).scrollTop(1);if($(window).scrollTop()==1){this.refreshPosition();this.adjustViewport();this.navBarHidden=true;if(resize){this.render();}return;}setTimeout($.proxy(function(){this.hideNavigationBar(resize);},this),10);},resize:function(){this.refresh();this.createContentSlider();this.render(true);},getThumbsSliderSettings:function(){return $.extend({},this.settings.slider,this.settings.thumbsSlider||{},{wipeTouchContainer:this.bottomPanel,createNavigation:false,cssAnimation:true});},createContentSlider:function(){this.adjustViewport();var contentSliderSettings=this.getContentSliderSettings();this.contentSliderHolder.horizontalSlider(contentSliderSettings);this.contentSlider=this.contentSliderHolder.horizontalSlider("get");this.createItemsHtml();this.contentSlider.selectItem(this.actualIndex==0?0:1,true);},getContentSliderSettings:function(){var wipeTouchItemsToMove=this.disableWipeTouchAnimation?2:1;return $.extend({},this.settings.slider,this.settings.contentSlider||{},{createNavigation:false,cssAnimation:true,wipeTouchContainer:this.contentSliderHolder,wipeTouchItemsToMove:wipeTouchItemsToMove,wipeLeftCallback:$.proxy(this.nextItem,this),wipeRightCallback:$.proxy(this.prevItem,this),wipeTouchEnableMoveWhileAnimation:false,disableWipeTouchAnimation:this.disableWipeTouchAnimation});},showPanels:function(){this.topPanel.show();this.adjustMiniTopbar();this.hidePanelsTimeout();this.bottomPanel.hide();if(this.thumbsSlider){this.bottomPanel.show();this.thumbsSlider.selectItem(this.actualIndex,true);}},hidePanelsTimeout:function(){if(this.hidePanelsTimerActive){if(this.hidePanelsTimer){clearTimeout(this.hidePanelsTimer);}this.hidePanelsTimer=setTimeout($.proxy(this.hidePanels,this),this.settings.hidePanelsAfter);}this.hidePanelsTimerActive=false;if(this.pager){if(this.thumbsSlider){this.overlay.removeClass("zsNoPanels");}}},hidePanels:function(){if(this.hidePanelsTimer){clearTimeout(this.hidePanelsTimer);}this.topPanel.hide();if(!this.hasCustomContainer()){this.bottomPanel.hide();if(this.pager){this.overlay.addClass("zsNoPanels");}}},togglePanels:function(){if(this.topPanel.is(":visible")){this.hidePanels();}else{this.showPanels();}},adjustViewport:function(){var height=this.contentSliderPane.height();var width=this.overlay.width();this.viewport={width:width,height:height};},adjustThumbSliderPostion:function(){},getDescriptionMaxHeight:function(){return 0;},createHtml:function(){if(this.overlay){return;}if(this.container.find(".zoomscript").length==0){var zoomscriptBody="";if(this.hideBodyContent){zoomscriptBody=$('<div class="zoomscriptBody"/>');}var overlay=$('<div class="zoomscript zs'+ucfirst(this.deviceName.toLowerCase())+(this.hasCustomContainer()?" zsMini ":"")+'"/>');this.container.append(zoomscriptBody,overlay.append($('<div class="zsContentSlider"/>'),$('<div class="zsPreloader init">'+Translate.t("loading",this.settings.language)+"</div>"),$('<div class="zsTopPanel"/>').append($('<div class="zsCloseBt">'+Translate.t("Close",this.settings.language)+"</div>"),$('<div class="zsItemDescription"/>').append($('<div class="zsTitle"/>'),$('<div class="zsText"/>'))),$('<div class="zsBottomPanel"/>').append($('<div class="zsPadding"/>').append($('<div class="zsThumbsSlider"/>'))),$('<div class="zsPager">').append($('<span class="zsPage"/>'),"/",$('<span class="zsCount"/>'))));if(this.hideBodyContent){this.container.find("> *").each($.proxy(function(index,element){if(!$(element).hasClass("zoomscript")&&!$(element).hasClass("zoomscriptBody")){this.container.find(".zoomscriptBody").append($(element));}},this));}if(this.hasCustomContainer()){overlay.append($('<div class="zsFullscreen"/>'));overlay.find(".zsFullscreen").click($.proxy(function(event){event.stopPropagation();this.toggleFullscreen();},this));}overlay.find(".zsThumbsSlider").horizontalSlider(this.getThumbsSliderSettings());overlay.find(".zsContentSlider").horizontalSlider(this.getContentSliderSettings());overlay.find(".zsCloseBt").click($.proxy(this.hideOverlay,this));overlay.find(".zsContentSlider").click($.proxy(this.togglePanels,this));overlay.find(".zsTopPanel").wipetouch({tapToClick:true});overlay.find(".zsBottomPanel").click($.proxy(this.hidePanelsTimeout,this));}},createItemsHtml:function(){this.contentSliderPane.html("");this.itemContents={};this.preloaders={};this.itemHolders={};var startIndex=Math.max(0,this.actualIndex-1);var stopIndex=Math.min(this.items.length-1,this.actualIndex+1);for(var i=startIndex;i<=stopIndex;i++){this.createItemHtml(i,"after");}},createItemHtml:function(index,position){if(index<0||index>=this.items.length){return;}var newItem=$('<div class="zsItemContentHolder" style="width: '+this.overlay.width()+"px; height: "+this.contentSliderPane.height()+'px"/>').append($('<div class="zsItemContent"/>'),$('<div class="zsPreloader">'+Translate.t("loading",this.settings.language)+"</div>"));this.itemContents[index]=newItem.find(".zsItemContent");this.preloaders[index]=newItem.find(".zsPreloader");this.preloaders[index].hide();this.itemHolders[index]=newItem;this.contentSlider.addItem(newItem,position,true);},deleteItemHtml:function(index){if(!this.itemHolders[index]){return;}this.contentSlider.deleteItem(index<this.actualIndex?0:2,true);delete (this.itemHolders[index]);delete (this.itemContents[index]);delete (this.preloaders[index]);},createThumbsHtml:function(){this.thumbsSliderHolder.show();this.thumbsSliderPane.html("");this.thumbs=null;jQuery.each(this.items,$.proxy(function(i,item){var selected=i==this.actualIndex;var thumb=$(item.thumbHtml(selected));this.thumbsSliderPane.append(thumb);thumb.click($.proxy(function(){this.selectItem(i);},this));this.thumbs=this.thumbs?this.thumbs.add(thumb):thumb;},this));},clearContent:function(){},updateContent:function(index){this.initPreloader.hide();var item=this.items[index];var itemContent=this.itemContents[index];if(itemContent){itemContent.removeClass("zsLoading");itemContent.html(item.html());if(index==this.actualIndex){this.itemDescription.hide();if(item.hasDescription()){this.itemDescription.show();this.itemDescriptionTitle.hide();this.itemDescriptionText.hide();if(item.title){this.itemDescriptionTitle.show();this.itemDescriptionTitle.html(item.title);}if(item.text){this.itemDescriptionText.show();this.itemDescriptionText.html(item.text);}}}var top=Math.round((this.contentSliderPane.height()-itemContent.outerHeight(true))/2);var left=Math.round((this.overlay.width()-itemContent.outerWidth(true))/2);itemContent.css("top",top);itemContent.css("left",left);}},itemLoaded:function(index){this.updateContent(index);this.hidePreloader(index);if(this.items[index]==this.renderingItem){if(this.settings.cacheItems>0&&this.items.length>1){var startIndex=Math.max(0,index-this.settings.cacheItems);var stopIndex=Math.min(this.items.length-1,index+this.settings.cacheItems);for(var i=startIndex;i<=stopIndex;i++){if(i!=index){var item=this.items[i];if(item.isPreloaded()&&!item.isLoaded()){this.updateContent(i);}else{if(item.isLoaded()){this.updateContent(i);this.hidePreloader(i);}else{this.items[i].load(this);}}}}}}},itemLoading:function(index){this.updateContent(index);this.showPreloader(index);},itemPreloaded:function(index){this.updateContent(index);},showPreloader:function(index){if(this.preloaders[index]){this.preloaderTimers[index]=setTimeout($.proxy(function(){if(this.preloaders[index]){this.preloaders[index].show();}},this),this.settings.showPreloaderAfter);}},hidePreloader:function(index){if(this.preloaders[index]){if(this.preloaderTimers[index]){clearTimeout(this.preloaderTimers[index]);this.preloaderTimers[index]=null;}this.preloaders[index].hide();}},adjustMiniTopbar:function(){var item=this.items[this.actualIndex];if(this.hasCustomContainer()&&!item.hasDescription()){this.topPanel.hide();}},adjustMiniMode:function(){this.fullscreenBt.show();this.closeBt.hide();this.bottomPanel.show();var bottomPanelHeight=this.bottomPanel.height();if(!this.settings.thumbs.active){this.bottomPanel.hide();bottomPanelHeight=0;this.overlay.addClass("zsNoPanels");}this.contentSliderHolder.height(this.overlay.height()-bottomPanelHeight);this.createContentSlider();},adjustFullscreenMode:function(){this.fullscreenBt.hide();this.closeBt.show();this.contentSliderHolder.height("100%");}});})(jQuery);function View_Android(){this.deviceType="mobile";this.deviceName="android";this.hideNavBar=true;this.hideNavBarTimout=true;this.hideBodyContent=true;this.navBarHidden=false;}(function($){$.extend(View_Android.prototype,View_Abstract.prototype,View_Mobile.prototype,{showItem:function(item,restoreFromUrl){this.showOverlay();var timer=setInterval($.proxy(function(){if(this.navBarHidden||this.hasCustomContainer()){this.bodyContent.height($(window).height());this.adjustViewport();this.showItemDelayed(item,restoreFromUrl);clearInterval(timer);}},this),100);},showItems:function(items,index,restoreFromUrl){if(items.length==1){this.showItem(items[index]);return;}this.showOverlay();var timer=setInterval($.proxy(function(){if(this.navBarHidden||this.hasCustomContainer()){this.bodyContent.height($(window).height());this.adjustViewport();this.showItemsDelayed(items,index,restoreFromUrl);clearInterval(timer);}},this),100);},restorePositionAfterRefresh:function(){if(this.overlay&&this.overlay.is(":visible")){if($(window).scrollLeft()==0&&$(window).scrollTop()==0){this.hideNavigationBar(true);return;}setTimeout($.proxy(this.restorePositionAfterRefresh,this),100);}},refreshPosition:function(){this.overlay.css("top",1);this.overlay.css("left",0);}});})(jQuery);function View_Androidtablet(){this.deviceType="mobile";this.deviceName="androidTablet";this.hideNavBar=false;}(function($){$.extend(View_Androidtablet.prototype,View_Androidtablet.prototype,View_Mobile.prototype,{restorePositionAfterRefresh:function(){if(this.overlay&&this.overlay.is(":visible")){if($(window).scrollTop()>1){this.refreshPosition();}else{if(this.afterRefreshTime<5000){this.afterRefreshTime+=100;setTimeout($.proxy(this.restorePositionAfterRefresh,this),100);}}}}});})(jQuery);function View_IPad(){this.deviceType="mobile";this.deviceName="iPad";this.hideNavBar=false;}(function($){$.extend(View_IPad.prototype,View_Abstract.prototype,View_Mobile.prototype,{adjustOverlayDimensions:function(){this.overlay.height(window.innerHeight);this.overlay.width(window.innerWidth);},restorePositionAfterRefresh:function(){if(this.overlay&&this.overlay.is(":visible")){if($(window).scrollTop()>1){this.refreshPosition();}else{if(this.afterRefreshTime<5000){this.afterRefreshTime+=100;setTimeout($.proxy(this.restorePositionAfterRefresh,this),100);}}}}});})(jQuery);function View_IPhone(){this.deviceType="mobile";this.deviceName="iPhone";this.hideNavBar=true;}(function($){$.extend(View_IPhone.prototype,View_Abstract.prototype,View_Mobile.prototype,{adjustOverlayDimensions:function(){this.overlay.height(window.innerHeight);this.overlay.width(window.innerWidth);},restorePositionAfterRefresh:function(){if(this.overlay&&this.overlay.is(":visible")){if($(window).scrollTop()>1){this.refreshPosition();}else{if(this.afterRefreshTime<5000){this.afterRefreshTime+=100;setTimeout($.proxy(this.restorePositionAfterRefresh,this),100);}}}}});})(jQuery);(function($){$.extend($.fn,{zoomscript:function(settings){if(/msie|MSIE [0-6]\./.test(navigator.userAgent)){return;}var zs=new ZoomScript(settings);zs.init(this);return zs;}});$.fn.zoomscript.defaults={contentMode:{containerId:"body",fillArea:true,mouseWheelActive:false},pluginPath:"zoomscript",language:"en",theme:"dark",history:false,cacheItems:2,showPreloaderAfter:200,slider:{speed:300,itemsToMove:5,easingEffect:"linear",wipeTouchEasingEffect:"easeOut",wipeTouchEasingSpeed:200},thumbs:{active:true},image:{minSize:100,dimensionsSeparator:",",disableCache:false},monitor:{itemNavigationLockDuration:50,slider:{},thumbs:{position:"right"}},mobile:{hidePanelsAfter:1500,slider:{},contentSlider:{},thumbsSlider:{},thumbs:{}},tooltip:{active:true,cookies:{name:"zsTooltipShown",expiration:31},slideshowSpeed:3000,animationSpeed:0},logo:{active:true,imagePath:null,url:"http://www.zoomscript.com"}};})(jQuery);var zsThemesCss={};var zsBrandImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAARCAYAAABO4PtZAAAACXBIWXMAAAsSAAALEgHS3X78AAAFTklEQVR4nO2YeYxfUxTHDy1aqtWhLQa1pUGpSLVBYy2xDVXSxK6lsYX6w761CSI0EaKkaGhD0aoIYovW3lqqYmltsXQYbdHRhWjHtMr3436fefPmN79pf9OIP3qSz7z73jvv3nvOPfec+5uONTU1VRExKlqXT8W0Mu//S+kizhF7iy3E15Hm9nmF/R0kbhD3iufbM7GOAkeOKaMzLf4fjuwrXhbbF55vLq6psM+R4lixUay7I7cRO4s53ODIpeKWglI/caLb7Vqp9SgTIznxGzFWrBIDxEvt6PMe0UlMWMfv7hCXianiDB7gyF/EjTmljcV7br8jHi50sqXoI+aLJa0MRJTsIX4QPxfedYsUAcvFX+4LvRV+30HsKeqsg3QX+7t9nXjC7Yllxs/6rY/kLPhDrBQ7iNXiC3Gx20hnsZloMFuL7cRnYk3O/t09z03EVqKxY4lJnOdJ8+EoG4t0FXeLsyI5m+czxNnix9xEbhWXeiCExWDV5vu+zpMZIsaJnWzcBdZ52gY0eC6PiT9z8yMKp+XmlRf6IroG58YfLnqJ2yNF4O/iStvWX4ywHUeJm8QV4i7P4cxIi86CnCA+Eu+Kvdz3MDOh6MjudgTyYHj/WyaJoZEiDGOP8eAvRJPj77RDltvYQ8WB4tVIEUpENLq/J6MpYnuK++ychZ58lQ1/TvzqMYfaUPpka32Qmx/677svxn9bVIuPxeHWOU7s4v5LSTY3opTU8WakhSOCn40UiTMjOZnFWeT+5xUdeXOkJErevD73fKCNQE6zY/YRn4j9xEnucKR1LhRTIuW07yMl5RF2VjZZCscQ9/NhpO34eKToHSTeirSw+7o90nM72O9ni/sjRRZbc7SdWG/ja3PzH+TrrpEi/KpIKa1/wf5VvrJljxCzxGHiNbGjfUCg4MhT/PzfHJlJPyshVPHFuXcDfCWiZro91zo9IkVkh2jaTq/4SnSRh/pGU47LtiSOZMuyGGw3jjNv+P0cO4f5VVt/iY1i4rdFWqSLbDzROdh6D0VzJyJrcm1066O0ZHrMe5bbr4tvIy0Cx66ppT7MHEmoj/M9ho0v6PX2lRzWmHv+ZSRH9srpYPDigk5f6+Ql64fJkyNxZBYR5EeKT9dovtjoPiKeEZMj5S2inwjbzTrflTLU8lu07sS8rCzc/xTJkT1a+yCbJNv1ELdZsdUFvTpf6QinZ1HV09evcjoYT4VsKKGzvoScycLjyE0j5ccFkXJYnzLfrSnzLi+dC/fZrphfeJ7twH8cya+Fsb5/KlJV6lQYfLbb5AYSNmfLgblJsxVrI21V+mRhOJpg2AE5nfbI6R6XQkIOG+bnRNgiz5HxyMUUyrl+31phKSekDXI/ufv4SKeB8D2y0FfyN/au5s/l0eTxk6NlWL8YyXlUTYoKyXp6pHwVNm6G2xhwfqSfXDWRnMgYLM6UCgzKhLTwaKSdwDbrYpDRvnIWphiwI1g0UhQOObWC8XA+FZsCmuV2bJju9jxfs7PyGIzsHWsnnKk40XNupGKRzx4QV+d0OD8ui1QEWBQilORMuljbbVVKOHdiCLtg20gOJVVwyphsHQoCxyJOBhRHHMDpo1sF43HSoKiyCDgVBw6PppTGmPjgyEiLXIUjzzVtCZWVxH5JpKMAOamxoMM9jr020nYgeooRXh0tpVQSLzoAJ5EP+aVBMVvR4osUQeiRmkhDbMHM+GIBRVqzHTs4HWArjiz+gmPsoyP9qsGH9aV+2bQlFKJi0i0K0VdbQd9tCQaWq8qZUOgWrIfxlrbxflnWqMSRG6SEbHBkcyE1TIqW/2hpU/4G9NA4wyMETb8AAAAASUVORK5CYII=";var zsFreeLicence=false;var zsCheckDomain=true;var zsCounter=1;function ZoomScript(settings){this.setSettings(settings);this.itemList=[];this.themeLoadingTime=0;this.themeMaxLoadingTime=4000;this.urlRelationName="zoomscript";if(zsCounter>1){this.urlRelationName+=zsCounter;}zsCounter+=1;}(function($){$.extend(ZoomScript.prototype,{setSettings:function(settings){this.settings=$.extend(true,{},$.fn.zoomscript.defaults,settings||{});},init:function($elements){if(!this.checkLicence()){return;}this.loadTheme();var view=View_Factory.getView(this.settings);$elements.each($.proxy(function(index,element){var item=Model_Factory.getItem($(element),this.settings);this.add(item);},this));if(view.hasCustomContainer()){this.settings.history=false;this.showItems(0,false);}if(this.settings.history){$.history.init($.proxy(function(hash){this.initFromHash(hash);},this));}},loadTheme:function(){if(!zsThemesCss[this.settings.theme]){var commonCss=$("<link/>");var deviceCss=$("<link/>");$("head").append(commonCss).append(deviceCss);commonCss.attr({type:"text/css",rel:"stylesheet"}).attr("href",this.settings.pluginPath.replace(/\/$/,"")+"/themes/"+this.settings.theme+"/styles/common.css");deviceCss.attr({type:"text/css",rel:"stylesheet"}).attr("href",this.settings.pluginPath.replace(/\/$/,"")+"/themes/"+this.settings.theme+"/styles/"+View_Factory.getDevice().type.toLowerCase()+".css");zsThemesCss[this.settings.theme]={};zsThemesCss[this.settings.theme]["common"]=commonCss;zsThemesCss[this.settings.theme]["device"]=deviceCss;}},isThemeLoaded:function(){try{var result=(zsThemesCss[this.settings.theme]["common"][0].sheet&&zsThemesCss[this.settings.theme]["device"][0].sheet&&zsThemesCss[this.settings.theme]["common"][0].sheet.cssRules.length>0&&zsThemesCss[this.settings.theme]["device"][0].sheet.cssRules.length>0)||(zsThemesCss[this.settings.theme]["common"][0].styleSheet&&zsThemesCss[this.settings.theme]["device"][0].styleSheet&&zsThemesCss[this.settings.theme]["common"][0].styleSheet.rules.length>0&&zsThemesCss[this.settings.theme]["device"][0].styleSheet.rules.length>0);}catch(err){return false;}return result;},afterThemeLoaded:function(callback){if(window.chrome&&zsThemesCss[this.settings.theme]["common"][0].sheet&&zsThemesCss[this.settings.theme]["common"][0].sheet.href.indexOf("file:")!=-1){callback();return;}if(!this.isThemeLoaded()){if(this.themeLoadingTime>this.themeMaxLoadingTime){alert("ZoomScript could not load CSS files. Please check path to plugin in your settings.");console.error('CSS could not be loaded: "'+zsThemesCss[this.settings.theme]["common"][0].href+'" or "'+zsThemesCss[this.settings.theme]["device"][0].href+'"');return;}setTimeout($.proxy(function(){this.afterThemeLoaded(callback);},this),100);this.themeLoadingTime+=100;return;}callback();},initFromHash:function(hash){if(!hash||hash=="_"){var view=View_Factory.getView(this.settings);view.hide();return;}var urlId=Hash.parseId(hash);if(urlId.relation==this.urlRelationName){this.showItems(urlId.index-1,true);}},add:function(item){var index;index=this.itemList.length;this.itemList[index]=item;item.click($.proxy(function(){this.showItems(index);},this));item.setIndex(index);if(this.settings.history){item.setUrlId(Hash.createId(this.urlRelationName,index+1));}},show:function(){if(!this.checkLicence()){return;}this.showItems(0,false);},showItems:function(index,restoreFromUrl){if(!this.checkLicence()){return;}var callback=$.proxy(function(){this.showItemsDelayed(index,restoreFromUrl);},this);this.afterThemeLoaded(callback);},showItemsDelayed:function(index,restoreFromUrl){var view=View_Factory.getView(this.settings);if(this.itemList.length==1){view.showItem(this.itemList[0],restoreFromUrl);}else{if(this.itemList.length>0){view.showItems(this.itemList,index,restoreFromUrl);}}},checkLicence:function(){if(zsFreeLicence&&View_Factory.getDevice().type!="monitor"){return false;}if(zsCheckDomain&&location.href.indexOf(unescape("%7A%6F%6F%6D%73%63%72%69%70%74%2E%63%6F%6D"))==-1&&location.href.indexOf(unescape("%2E%70%61%6C%6F"))==-1&&location.href.indexOf(unescape("%68%61%6C%66"))==-1){alert(unescape("%59%6F%75%20%64%6F%20%6E%6F%74%20%68%61%76%65%20%70%65%72%6D%69%73%73%69%6F%6E%73%20%74%6F%20%75%73%65%20%74%68%69%73%20%76%65%72%73%69%6F%6E%20%6F%66%20%5A%6F%6F%6D%53%63%72%69%70%74%20%6F%6E%20%79%6F%75%72%20%70%72%6F%6A%65%63%74%73%2E%20%50%6C%65%61%73%65%20%63%6F%6E%74%61%63%74%20%75%73%20%66%6F%72%20%6C%69%63%65%6E%73%65%2E"));return false;}return true;}});})(jQuery);function ucfirst(string){return string.charAt(0).toUpperCase()+string.slice(1);}